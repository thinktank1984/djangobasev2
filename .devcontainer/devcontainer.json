{
  "name": "DjangoBaseV2 Development",
  "dockerFile": "Dockerfile",
  "context": "..",

  // VS Code settings
  "settings": {
    "python.defaultInterpreterPath": "/usr/local/bin/python",
    "python.linting.pylintEnabled": true,
    "python.linting.flake8Enabled": true,
    "python.linting.mypyEnabled": false,
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": ["--line-length", "88"],
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.organizeImports": true
    },
    "python.sortImports.args": ["--profile", "black"],
    "files.exclude": {
      "**/__pycache__": true,
      "**/*.pyc": true,
      "**/migrations": false,
      "**/node_modules": true,
      "**/.git": true,
      "**/.DS_Store": true,
      "**/venv": true,
      "**/.pytest_cache": true,
      "**/.coverage": true,
      "**/htmlcov": true
    },
    "django.snippets.enabled": true,
    "emmet.includeLanguages": {
      "django-html": "html"
    },
    "tailwindCSS.includeLanguages": {
      "django-html": "html"
    },
    "tailwindCSS.experimental.classRegex": [
      "class: \"([^\"]*)\"",
      "class: '([^']*)'",
      "className: \"([^\"]*)\"",
      "className: '([^']*)'"
    ]
  },

  // VS Code extensions to install
  "extensions": [
    "ms-python.python",
    "ms-python.vscode-pylance",
    "batisteo.vscode-django",
    "ms-python.black-formatter",
    "ms-python.isort",
    "ms-python.flake8",
    "donjayamanne.githistory",
    "eamodio.gitlens",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "formulahendry.auto-rename-tag",
    "ms-vscode.vscode-typescript-next",
    "ritwickdey.liveserver",
    "redhat.vscode-yaml",
    "ms-vscode-remote.remote-containers"
  ],

  // Forward ports
  "forwardPorts": [8000, 3000, 5432],
  "portsAttributes": {
    "8000": {
      "label": "Django Dev Server",
      "onAutoForward": "notify"
    },
    "3000": {
      "label": "Frontend Dev Server",
      "onAutoForward": "ignore"
    },
    "5432": {
      "label": "PostgreSQL Database",
      "onAutoForward": "ignore"
    }
  },

  // Commands to run after creating the container
  "postCreateCommand": "bash /workspaces/djangobasev2/.devcontainer/post-create.sh",

  // User configuration
  "remoteUser": "vscode",

  // Mount additional volumes
  "mounts": [
    "source=${localWorkspaceFolder}/blogapp,target=/workspaces/djangobasev2/blogapp,type=bind",
    "source=${localWorkspaceFolderBasename}-pip-cache,target=/root/.cache/pip,type=volume"
  ],

  // Lifecycle hooks
  "postAttachCommand": {
    "python": "cd /workspaces/djangobasev2/blogapp && python manage.py check --deploy"
  },

  // Features to install
  "features": {
    "ghcr.io/devcontainers/features/python:1": {
      "version": "3.11",
      "installTools": "true"
    },
    "ghcr.io/devcontainers/features/node:1": {
      "version": "18",
      "nodeGypDependencies": true
    },
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {}
  },

  // Customizations for different tools
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "batisteo.vscode-django",
        "bradlc.vscode-tailwindcss",
        "ms-python.black-formatter"
      ]
    }
  },

  // Environment variables
  "containerEnv": {
    "DJANGO_SETTINGS_MODULE": "core.settings",
    "PYTHONPATH": "/workspaces/djangobasev2/blogapp",
    "DEBUG": "1",
    "PYTHONDONTWRITEBYTECODE": "1",
    "PYTHONUNBUFFERED": "1"
  },

  // Run configuration
  "runArgs": [
    "--name", "djangobasev2-dev",
    "--cap-add=SYS_PTRACE",
    "--security-opt", "seccomp=unconfined"
  ]
}